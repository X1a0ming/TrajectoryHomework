### 实践报告

#### 方法介绍

1. **A*算法路径生成**  
   A*算法是一种广泛应用于路径规划的启发式搜索算法，能够在已知地图中找到从起点到终点的最优路径。在本实验中，A*算法用于在二维栅格地图中生成避障路径。具体实现如下：

   - **地图表示**：地图被离散化为一个二维栅格，每个栅格单元可以是空闲的（0）或被障碍物占据的（1）。地图的范围和分辨率由用户定义。代码中通过`GridMap`类实现栅格地图的表示，地图的宽度、高度、最小和最大坐标值以及分辨率通过构造函数初始化。
   - **节点表示**：每个节点包含其在栅格中的坐标（x, y）、从起点到该节点的实际代价（g_cost）、从该节点到终点的启发式代价（h_cost）以及指向父节点的指针（用于回溯路径）。代码中通过`Node`结构体表示节点，节点的总代价通过`f()`函数计算，即`f = g_cost + h_cost`。
   - **启发式函数**：使用欧几里得距离作为启发式函数，估计从当前节点到终点的代价。代码中通过`heuristic`函数实现，计算两个节点之间的欧几里得距离。
   - **开放列表与关闭列表**：开放列表是一个优先队列，存储待扩展的节点，按总代价（f = g_cost + h_cost）排序。关闭列表用于记录已经扩展过的节点，避免重复计算。代码中通过`std::priority_queue`实现开放列表，关闭列表则是一个二维布尔数组。
   - **路径搜索**：从起点开始，逐步扩展节点，计算每个邻居节点的代价，并更新开放列表。当终点被加入关闭列表时，搜索结束，回溯路径。代码中通过`findPath`函数实现路径搜索，搜索过程中通过`getNeighbors`函数获取当前节点的邻居节点，并通过`reconstructPath`函数回溯路径。
   - **障碍物处理**：通过订阅障碍物信息，将障碍物位置映射到栅格地图中，并在路径规划时避开这些区域。代码中通过`setObstacle`函数将障碍物标记为占用状态。

   **A*算法实现流程**：
   1. **初始化**：将起点加入开放列表，初始化关闭列表为空。
   2. **节点扩展**：从开放列表中取出代价最小的节点，检查是否为终点。如果是，则回溯路径并返回。
   3. **邻居节点处理**：获取当前节点的所有邻居节点，计算每个邻居节点的代价。如果邻居节点不在关闭列表中且不是障碍物，则更新其代价并将其加入开放列表。
   4. **重复搜索**：重复步骤2和步骤3，直到找到终点或开放列表为空。
   5. **路径回溯**：通过父节点指针回溯路径，生成从起点到终点的路径。

2. **五次多项式轨迹优化**  
   在生成路径后，为了使得机器人的运动更加平滑，使用五次多项式对路径进行轨迹优化。五次多项式能够保证轨迹在位置、速度和加速度上的连续性，适用于机器人的平滑运动控制。具体实现如下：

   - **路径采样**：从A*算法生成的路径中均匀采样一定数量的点，作为轨迹生成的参考点。代码中通过`GenerateTrajectory`函数实现路径采样，采样点数量为30个。
   - **五次多项式生成**：对于每一对相邻的采样点，使用五次多项式生成轨迹。五次多项式的形式为：
     \[
     x(t) = a_0 + a_1 t + a_2 t^2 + a_3 t^3 + a_4 t^4 + a_5 t^5
     \]
     其中，\( t \) 是时间参数，\( a_0, a_1, \dots, a_5 \) 是多项式系数。代码中通过`computeQuinticPolynomialCoefficients`函数计算多项式系数。
   - **系数计算**：通过起点和终点的位置、速度和加速度约束，求解五次多项式的系数。使用QR分解求解线性方程组，确保轨迹在起点和终点处的平滑过渡。代码中通过`computeQuinticPolynomialCoefficients`函数实现系数计算。
   - **轨迹生成**：根据计算出的多项式系数，生成连续的轨迹点，并发布给机器人执行。代码中通过`GenerateTrajectory`函数生成轨迹点，并通过ROS发布。

   **五次多项式轨迹优化实现流程**：
   1. **路径采样**：从A*算法生成的路径中均匀采样一定数量的点，作为轨迹生成的参考点。
   2. **多项式系数计算**：对于每一对相邻的采样点，使用五次多项式生成轨迹，并通过起点和终点的位置、速度和加速度约束，求解多项式系数。
   3. **轨迹生成**：根据计算出的多项式系数，生成连续的轨迹点。
   4. **轨迹发布**：将生成的轨迹点发布给机器人执行。

#### 实验结果及分析

1. **路径生成结果**  
   通过A*算法生成的路径能够有效避开地图中的障碍物，并且在较短的时间内找到从起点到终点的最优路径。

   实验结果表明，A*算法在二维栅格地图中的路径规划效果良好，能够适应不同复杂度的地图环境，平均耗时为0.5ms，最大耗时不超过1ms。

   - **计算效率**：由于使用了优先队列和启发式搜索，A*算法的计算效率较高，能够在较短时间内完成路径规划。
   - **障碍物避让**：通过将障碍物信息映射到栅格地图中，A*算法能够有效避开障碍物，确保路径的安全性。

2. **轨迹优化结果**  
   通过五次多项式生成的轨迹在平滑性和连续性上表现良好，能够有效减少机器人在运动过程中的抖动和突变。

   经过多次测试，我们的五次多项式算法平均耗时为0.1ms，最大耗时不超过0.2ms，满足实时性要求。

   - **平滑性**：五次多项式生成的轨迹在位置、速度和加速度上均保持连续，确保了机器人的平滑运动。
   - **轨迹精度**：生成的轨迹与原始路径的偏差较小，表明轨迹优化算法能够在不显著偏离原始路径的情况下生成平滑的轨迹。
   - **计算效率**：由于五次多项式的计算复杂度较低，轨迹生成过程能够在较短时间内完成，适合实时应用。
